---
title: Почему порядок транзакций не гарантирован?
tags: [EVM, Ethereum, Транзакции, Порядок транзакций, Майнинг, Mempool]
---

## Короткий ответ

Порядок транзакций в Ethereum не гарантирован, так как майнеры имеют право выбирать, какие транзакции включать в блок и в каком порядке.  Это зависит от **gas price**, стратегии майнинга и других факторов.

![[Pasted image 20241213173452.png]]


## Подробный разбор

**Mempool (пул памяти):**

Когда пользователь отправляет транзакцию в сеть Ethereum, она сначала попадает в **mempool** - это своего рода очередь ожидающих транзакций. Майнеры выбирают транзакции из mempool для включения в создаваемые ими блоки.

**Выбор майнеров:**

Майнеры **не обязаны** включать транзакции в блоки в том порядке, в котором они были отправлены. Они могут выбирать транзакции на основе следующих факторов:

* **Gas Price:** Майнеры, как правило, отдают предпочтение транзакциям с более высоким gas price, так как это приносит им большую прибыль.
* **Размер транзакции:**  Меньшие по размеру транзакции могут быть более выгодными для включения в блок, так как позволяют вместить больше транзакций и получить больше комиссий.
* **Стратегия майнинга:**  У майнеров могут быть свои собственные стратегии выбора транзакций, например,  prioritizing certain types of transactions (приоритезация определенных типов транзакций) или  transactions from specific senders (транзакции от определенных отправителей).


**Front-running (опережение):**

Отсутствие гарантированного порядка транзакций может привести к **front-running** - это тип атаки, при которой злоумышленник отслеживает транзакции в mempool и вставляет свою собственную транзакцию с более высоким gas price перед целевой транзакцией,  чтобы получить advantage (преимущество).  


**Влияние на смарт-контракты:**

Разработчики смарт-контрактов должны учитывать, что порядок транзакций не гарантирован, и проектировать свои контракты таким образом, чтобы минимизировать potential risks (потенциальные риски), связанные с этим.


## Связанные темы

* [Вернуться к списку вопросов](4.%20Список%20вопросов.md)
* [[В чем различие Gas Price и Gas Limit?]]
* [[Как транзакция выполняется на уровне EVM? Может ли измениться code storage аккаунта? Что происходит со storage аккаунта?]]


## Источники


* [Ethereum Documentation - Transactions](https://ethereum.org/en/developers/docs/transactions/)
* [Ethereum Stack Exchange - Why is transaction order not guaranteed?](https://ethereum.stackexchange.com/questions/1359/why-is-transaction-order-not-guaranteed)
* [Blocknative - Ethereum Transaction Lifecycle](https://www.blocknative.com/blog/ethereum-transaction-lifecycle)


---