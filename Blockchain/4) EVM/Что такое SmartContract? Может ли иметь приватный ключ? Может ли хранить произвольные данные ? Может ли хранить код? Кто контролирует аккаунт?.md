---
title: Что такое Smart Contract?
tags: [EVM, Ethereum, Аккаунты, Smart Contract]
---
## Короткий ответ

Smart Contract - это аккаунт в Ethereum, содержащий код, который выполняется автоматически при определенных условиях. Он **не имеет** приватного ключа, **может** хранить произвольные данные и код, и контролируется **кодом, который в нем содержится**.

## Подробный разбор

**Smart Contract (Смарт-контракт)**  - это программа, которая хранится в блокчейне Ethereum и выполняется в EVM. Он представляет собой набор правил и условий, записанных в коде, которые автоматически выполняются при наступлении определенных событий.

* **Приватный ключ:** Smart Contract **не имеет приватного ключа**.  Он не контролируется пользователем, а выполняется децентрализованно в сети Ethereum.  Взаимодействие с контрактом происходит путем отправки транзакций на его адрес.

* **Хранение данных:** Smart Contract **может хранить произвольные данные** в своем собственном хранилище (storage).  Это позволяет контрактам сохранять информацию, необходимую для их работы, такую как балансы пользователей, результаты голосований и т.д.

* **Хранение кода:** Smart Contract **хранит код**, который определяет его логику и поведение.  Этот код выполняется в EVM при получении транзакции, адресованной контракту.

* **Контроль аккаунта:** Smart Contract контролируется **исключительно кодом, который в нем содержится**.  После развертывания в блокчейне, код контракта становится неизменным и выполняется автоматически, без возможности вмешательства извне.  Это гарантирует, что контракт будет работать в соответствии с заданными правилами.

`owner` в смарт-контрактах - это специальная переменная (обычно типа `address`), которая хранит адрес Ethereum-аккаунта, обладающего **привилегиями управления контрактом**.  Этот аккаунт, как правило, является тем, кто развернул контракт, и имеет возможность выполнять определенные действия, недоступные другим пользователям.

**Зачем нужен `owner`?**

`owner` предоставляет возможность вносить изменения в контракт после его развертывания.  Это необходимо, потому что смарт-контракты, после развертывания в блокчейне, становятся неизменяемыми для обычных пользователей.  Однако, часто возникают ситуации, когда требуется:

* **Обновление логики контракта:** Исправление ошибок, добавление новых функций или изменение параметров.
* **Пауза/возобновление работы контракта:** В случае обнаружения уязвимостей или необходимости проведения технического обслуживания.
* **Изменение настроек:**  Корректировка комиссий, лимитов или других параметров контракта.
* **Управление средствами:**  В некоторых случаях, `owner` может иметь право выводить средства из контракта.  **Важно отметить:** Хранение средств в контракте, управляемом `owner`,  противоречит принципам децентрализации и создает риски для пользователей.  В идеале, контракты должны быть спроектированы таким образом, чтобы минимизировать необходимость управления средствами со стороны `owner`.


**Как используется `owner`?**

В коде контракта обычно реализуются специальные функции-модификаторы (modifiers), которые проверяют, является ли вызывающий функцию аккаунт `owner`.  Эти модификаторы ограничивают доступ к функциям управления только для `owner`.

**Пример:**

```solidity
modifier onlyOwner() {
    require(msg.sender == owner, "Only owner can call this function.");
    _;
}

function pauseContract() public onlyOwner {
    paused = true;
}
```

В этом примере, функция `pauseContract()` может быть вызвана только аккаунтом, адрес которого сохранен в переменной `owner`.


**Альтернативы `owner`:**

* **Многоподписный кошелек (Multisig):** Вместо одного `owner`, управление контрактом может быть распределено между несколькими аккаунтами.  Это повышает безопасность и децентрализацию.
* **DAO (Decentralized Autonomous Organization):**  Управление контрактом может быть передано DAO,  что позволяет принимать решения коллективно, путем голосования участников.
* **Timelock:**  Временная блокировка функций,  которая позволяет вносить изменения только после истечения определенного периода времени.  Это дает возможность сообществу отреагировать на потенциально опасные изменения.
* **Без owner'а (ownerless):**  В некоторых случаях, контракты могут быть спроектированы без `owner`,  что делает их полностью децентрализованными и автономными.


**Риски, связанные с `owner`:**

* **Централизация:** Контракт, управляемый одним `owner`,  является централизованным.
* **Риск компрометации:**  Если приватный ключ `owner` будет скомпрометирован,  злоумышленник сможет получить контроль над контрактом.
* **Злоупотребление властью:**  `owner` может использовать свои привилегии в своих интересах,  во вред пользователям контракта.


**В заключение:** `owner`  в смарт-контрактах предоставляет необходимую гибкость для управления и обновления контракта после развертывания. Однако,  важно понимать связанные с этим риски и, по возможности,  использовать альтернативные, более децентрализованные подходы к управлению.  Дизайн контракта должен учитывать баланс между гибкостью и безопасностью,  стремясь к максимальной децентрализации и минимизации доверия к одному управляющему аккаунту.

## Пример

Представьте себе Smart Contract как вендинговый автомат.  Вы отправляете ему деньги (транзакцию) и выбираете товар.  Код контракта проверяет, достаточно ли средств и выдает товар, если условие выполнено.  Весь процесс автоматизирован и определяется кодом контракта.


## Связанные темы

* [Вернуться к списку вопросов](4.%20Список%20вопросов.md)
* [[Типы аккаунтов в EVM]]
* [[Что такое EOA? Имеет ли он приватный ключ? Может ли хранить произвольные данные ? Может ли хранить код? Кто контролирует аккаунт?]]
* [[Что такое Nonce в состоянии аккаунта?]]

## Источники

* [Ethereum Documentation - Smart Contracts](https://ethereum.org/en/developers/docs/smart-contracts/)
* [Solidity Documentation](https://docs.soliditylang.org/)



---