---
title: Основные поля и структура транзакции
tags: [EVM, Ethereum, Транзакции, Структура транзакции, RLP]
---
## Короткий ответ

Транзакция в Ethereum — это подписанное сообщение, инициирующее действие в блокчейне.  Существует два типа транзакций: **Legacy Transaction**  и **EIP-1559 Transaction**. Оба типа содержат информацию о переводе или выполнении кода, но различаются в структуре полей, связанных с оплатой за газ.  Все транзакции сериализуются с помощью **RLP-кодирования**.

## Подробный разбор

**Типы транзакций:**

* **Legacy Transaction:**  Это исходный тип транзакции, используемый до внедрения EIP-1559.
    * **Поля:** `nonce`, `gasPrice`, `gasLimit`, `to`, `value`, `data`, `v`, `r`, `s`.
    * `gasPrice` устанавливается отправителем напрямую.

* **EIP-1559 Transaction:**  Введенный с London hard fork, этот тип транзакции предлагает более гибкий и предсказуемый механизм оплаты за газ.  
    * **Поля:** `chainId`, `nonce`, `maxPriorityFeePerGas`, `maxFeePerGas`, `gasLimit`, `to`, `value`, `data`, `accessList`, `v`, `r`, `s`.
    * `maxPriorityFeePerGas` (tip):  "чаевые" для майнера/валидатора за быстрое включение транзакции в блок.
    * `maxFeePerGas`: Максимальная цена за gas, которую отправитель готов заплатить.  
    * `accessList`:  Список адресов и ключей хранения, к которым будет осуществляться доступ в транзакции. Позволяет более точно оценить gasLimit и снизить его стоимость. (см. [[Что такое accessList в EIP-2930?]])


**Общие поля:**

* **nonce:**  Счетчик транзакций отправителя (см. [[Что такое Nonce в состоянии аккаунта?]]).
* **gasLimit:** Максимальное количество gas, которое отправитель готов потратить на выполнение транзакции (см. [[В чем различие Gas Price и Gas Limit?]]).
* **to:**  Адрес получателя. Для создания контракта это поле пустое.
* **value:** Количество Wei, которое переводится получателю.
* **data:** Данные, передаваемые в вызываемую функцию контракта. Для простых переводов Ether это поле пустое.
* **v, r, s:** Компоненты ECDSA-подписи.


**RLP-кодирование:**

Оба типа транзакций сериализуются с помощью RLP-кодирования перед включением в блок.

**Тип транзакции - как определить?**

Тип транзакции определяется по наличию поля `type`. Для Legacy Transaction это поле отсутствует (значение `type` равно 0). Для EIP-1559 Transaction значение `type` равно 2. EIP-2930 Transaction имеет `type` равный 1.

## Связанные темы

* [Вернуться к списку вопросов](4.%20Список%20вопросы.md)
* [[Что такое Nonce в состоянии аккаунта?]]
* [[В чем различие Gas Price и Gas Limit?]]
* [[Как транзакция выполняется на уровне EVM? Может ли измениться code storage аккаунта? Что происходит со storage аккаунта?]]
* [[Что такое accessList в EIP-2930?]]

## Источники

* [Ethereum Documentation - Transactions](https://ethereum.org/en/developers/docs/transactions/)
* [Yellow Paper - Transaction](https://ethereum.github.io/yellowpaper/paper.pdf#page=13)
* [Ethereum RLP Encoding](https://eth.wiki/fundamentals/rlp)
