---
title: Что такое replay-attack? Как защититься?
tags: [EVM, Ethereum, Аккаунты, Nonce, Транзакции, Безопасность, Атаки]
---

## Короткий ответ

Replay-attack - это тип атаки, при которой злоумышленник перехватывает и повторно отправляет валидную транзакцию.  Защита от replay-атак в Ethereum реализована с помощью механизма nonce.


## Подробный разбор

**Replay Attack (атака повторного воспроизведения)** - это вид атаки, при которой злоумышленник перехватывает валидную транзакцию, отправленную от одного пользователя к другому, а затем повторно отправляет эту же транзакцию в сеть, пытаясь выполнить ее второй раз.

**Как это работает?**

Злоумышленник может перехватить транзакцию различными способами, например, прослушивая сетевой трафик.  Если транзакция не защищена от повторного воспроизведения, злоумышленник может просто отправить ее снова в сеть.  В результате транзакция может быть выполнена дважды, что может привести к нежелательным последствиям, таким как двойное списание средств со счета отправителя.

**Защита от Replay-атак в Ethereum:**

В Ethereum защита от replay-атак реализована с помощью механизма **nonce**. Как мы уже знаем, каждая транзакция должна содержать nonce, соответствующий текущему nonce аккаунта отправителя.  После выполнения транзакции nonce аккаунта увеличивается на единицу.

Если злоумышленник попытается повторно отправить перехваченную транзакцию,  ее nonce будет уже не соответствовать текущему nonce аккаунта отправителя.  Сеть Ethereum распознает эту транзакцию как невалидную и отклонит ее.


## Пример

Алиса отправляет Бобу 10 ETH.  Злоумышленник перехватывает эту транзакцию.  Если бы не было механизма nonce, злоумышленник мог бы отправить эту транзакцию еще раз, и Боб получил бы еще 10 ETH, а с Алисы было бы списано 20 ETH.  Благодаря nonce, повторная отправка транзакции будет отклонена.


## Связанные темы

* [Вернуться к списку вопросов](4.%20Список%20вопросов.md)
* [[Что такое Nonce в состоянии аккаунта?]]
* [[Почему Nonce увеличивается после каждой транзакции?]]
* [[Когда еще Nonce увеличивается помимо исполнения транзакции?]]


## Источники

* [OWASP - Replay Attacks](https://owasp.org/www-community/attacks/Replay_attack)


---