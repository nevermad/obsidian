[Вернуться к списку вопросов](3.%20Список%20вопросов)
## Короткий ответ

Механизм **Casper** в Ethereum обеспечивает финализацию блоков через голосование валидаторов за связи между чекпоинтами. Если $$ \geq 2/3 $$ стейка голосует за связь, она становится финализированной, а блоки до этого чекпоинта считаются необратимыми.

---

## Подробный разбор

### Основные компоненты Casper

1. **Чекпоинты**:
   - Каждые 32 блока становятся кандидатами в чекпоинты.
   - Валидаторы голосуют за связь между последовательными чекпоинтами.

2. **Голосование валидаторов**:
   - Валидаторы создают голос (vote), указывая:
     - Исходный чекпоинт.
     - Целевой чекпоинт.
   - Голоса записываются в блокчейн.

3. **Правило 2/3**:
   - Связь между чекпоинтами считается финализированной, если за неё проголосовало \( \geq 2/3 \) общего стейка.

---

### Пример работы

1. **Инициация чекпоинтов**:
   - Блоки $$ B_{32} $$ и $$ B_{64} $$ становятся чекпоинтами.

2. **Голосование**:
   - Валидаторы голосуют за связь $$ B_{32} \rightarrow B_{64} $$.

3. **Финализация**:
   - Если 2/3 стейка поддерживают эту связь, блоки до $$ B_{64} $$ финализируются.

---

### Роль экономической безопасности

1. **Slashing**:
   - Валидаторы, голосующие за конфликтующие связи, теряют часть или весь свой stake.

2. **Мотивация**:
   - Экономические стимулы заставляют валидаторов работать честно.

---

### Преимущества Casper

1. **Быстрая финализация**:
   - Чекпоинты помогают быстрее достигать консенсуса.

2. **Устойчивость к форкам**:
   - Финализированные блоки нельзя переписать.

3. **Экономическая эффективность**:
   - Casper использует стейк вместо энергозатратных вычислений.

---

### Связанные темы

- [[Как консенсус POS определяет активного валидатора / block proposer?]]
- [[Каким образом консенсус Ethereum решает проблему форков?]]
- [[Расскажите о финализации блоков в Ethereum.]]

---

### Источники

1. [Casper Protocol Overview](https://ethereum.org/en/developers/docs/consensus-mechanisms/casper/)
2. [Finality in Casper](https://beaconcha.in/)
3. [Understanding Ethereum Checkpoints](https://ethereum.org/en/staking/)

---