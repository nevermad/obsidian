[Вернуться к списку вопросов](3.%20Список%20вопросов)
## Короткий ответ

**Quorum** — это минимальное количество узлов в распределённой системе, которые должны согласиться на определённое решение для его принятия. Он гарантирует, что система остаётся согласованной и корректной, даже если часть узлов выходит из строя.

---

## Подробный разбор

### Основная идея Quorum

1. **Определение**:
   - Quorum — это минимальное число узлов, которое должно участвовать в операции (например, чтении, записи, согласовании), чтобы обеспечить согласованность данных и корректность выполнения.

2. **Применение**:
   - Используется в консенсус алгоритмах (например, Paxos, Raft) и распределённых базах данных для предотвращения конфликтов и достижения согласия.

3. **Формула для определения Quorum**:
   - В большинстве систем:
     $$
     Quorum \geq \frac{N}{2} + 1
     $$
     где \( N \) — общее количество узлов.

---

### Пример работы Quorum

1. **Сценарий**:
   - Система состоит из 5 узлов (\( N = 5 \)).
   - Для достижения Quorum необходимо согласие от минимум \( 3 \) узлов (\( \frac{5}{2} + 1 = 3 \)).

2. **В случае сбоя**:
   - Если 2 из 5 узлов выходят из строя, оставшиеся 3 могут продолжить работу, обеспечивая согласованность.

3. **Распределённые операции**:
   - **Чтение**: Quorum может включать только одну реплику.
   - **Запись**: Quorum требует подтверждения от большинства реплик.

---

### Почему Quorum важен?

1. **Предотвращение разделения сети (split-brain)**:
   - Quorum гарантирует, что только одна группа узлов будет выполнять операции, даже если сеть разделена на несколько частей.

2. **Согласованность данных**:
   - Quorum обеспечивает, что данные в репликах остаются согласованными.

3. **Устойчивость к сбоям**:
   - Система продолжает работать, пока достигается Quorum, несмотря на сбои узлов.

---

### Проблемы Quorum

1. **Сложность реализации**:
   - В системах с большим количеством узлов согласование Quorum может стать сложным и медленным.

2. **Зависимость от конфигурации**:
   - Если узлы распределены географически, задержки между ними могут увеличивать время достижения Quorum.

3. **Риск изоляции**:
   - Если большинство узлов становится недоступным, оставшиеся узлы не могут достичь Quorum и продолжить работу.

---

### Примеры использования

1. **Paxos и Raft**:
   - Консенсус достигается при согласии большинства узлов, что соответствует Quorum.

2. **Распределённые базы данных**:
   - В Apache Cassandra и Amazon Dynamo Quorum используется для операций чтения и записи.

3. **Блокчейн**:
   - В PBFT и других алгоритмах с византийской устойчивостью Quorum используется для проверки валидности блока.

---

### Связанные темы

- [[Что такое консенсус алгоритм? Для чего он нужен и какую задачу выполняет?]]
- [[Как решить проблему конфликтов?]]
- [[Расскажите о механизме работы консенсуса Paxos. Какие основные роли и взаимодействие?]]

---

### Источники

1. [Distributed Consensus Algorithms](https://raft.github.io/)
2. [Understanding Quorum in Cassandra](https://cassandra.apache.org/doc/latest/)
3. [Quorum Systems in Distributed Databases](https://jepsen.io/)

---