---
tags: [блокчейн, распределенные-системы, paxos, консенсус, алгоритмы-консенсуса, proposer, acceptor, learner]
aliases: [Paxos алгоритм, Paxos консенсус, работа Paxos]
---
## Короткий ответ:

Paxos - это алгоритм консенсуса для достижения соглашения о едином значении в распределенной системе. Он использует три роли: Proposer (предлагающий), Acceptor (принимающий) и Learner (обучающийся), которые взаимодействуют в двух фазах: Prepare и Accept.

## Подробный разбор:

**Роли в Paxos:**

* **Proposer (Предлагающий):**  Инициирует процесс консенсуса, предлагая значение для принятия.  
    * **Действия:**  Генерирует предложение с уникальным номером (`n`) и значением (`v`), отправляет запросы Prepare и Accept.
* **Acceptor (Принимающий):**  Голосует за принятие или отклонение предложений.  
    * **Действия:**  Отвечает на запросы Prepare (Promise) и Accept (Accepted),  хранит информацию о принятых предложениях.  Ключевая роль в обеспечении безопасности и согласованности.
* **Learner (Обучающийся):** Пассивно получает информацию о принятом значении.  
    * **Действия:**  Получает уведомления от Acceptors о принятых значениях,  формирует окончательное решение о согласованном значении.


**Фазы Paxos:**

Подробное описание фаз представлено в заметке [[Что происходит в phase 1, phase 2? Что такое n, v?]].  Кратко:

* **Phase 1: Prepare:** Proposer отправляет запрос Prepare всем Acceptors с номером предложения `n`. Acceptor отвечает Promise, если `n` больше любого предыдущего номера,  за который он дал Promise.  Acceptor также  отправляет Proposer информацию о ранее принятом значении.
* **Phase 2: Accept:** Если Proposer получает большинство Promises,  он отправляет запрос Accept  с номером `n`  и значением `v` (выбранным на основе полученных от Acceptors данных). Acceptor принимает предложение,  если  `n` не меньше номера последнего данного Promise.


**Взаимодействие:**

1. **Proposer** инициирует процесс, отправляя **Prepare** запросы **Acceptors**.
2. **Acceptors** отвечают **Promises**  и информацией о ранее принятых значениях.
3. **Proposer**,  получив большинство **Promises**,  отправляет **Accept** запросы с выбранным значением.
4. **Acceptors**,  приняв значение,  уведомляют **Learners**.
5. **Learners**, получив информацию от большинства **Acceptors**,  фиксируют согласованное значение.


**Свойства Paxos:**

* **Safety (Безопасность):** Гарантирует, что будет выбрано только одно значение.
* **Liveness (Жизнеспособность):**  Если большинство узлов работает корректно,  соглашение будет достигнуто.  Однако,  Paxos не гарантирует liveness в случае  "живой блокировки" (livelock).
* **Fault Tolerance (Отказоустойчивость):**  Работает при наличии сбоев узлов,  допускает до половины византийских узлов.


## Связанные темы:


* [[Что происходит в phase 1, phase 2? Что такое n, v?]]
* [[Что такое Quorum?]]
* [[Что такое Lamport timestamp, Lamport clock?]]
* [Вернуться к списку вопросов](3.%20Список%20вопросов)
* [[Схема алгоритма Paxos.canvas|Схема алгоритма Paxos]]


## Источники:

* [Paxos Made Simple](https://lamport.azurewebsites.net/pubs/paxos-simple.pdf)