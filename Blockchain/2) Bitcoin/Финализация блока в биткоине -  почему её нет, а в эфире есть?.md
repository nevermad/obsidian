
**Короткий ответ**: Финализация блока — это момент, после которого блок и его данные нельзя изменить. В Bitcoin нет абсолютной финализации, так как блоки могут быть заменены в случае реорганизации цепочки. В Ethereum финализация достигается через механизмы Proof of Stake и алгоритмы консенсуса, которые гарантируют неизменность данных после завершения определённых этапов.

---

## Подробный разбор

### Почему в Bitcoin нет финализации?

1. **Долговечность цепочки**:
   - В Bitcoin используется Proof of Work, где майнеры создают блоки, решая сложные задачи.
   - Возможна **реорганизация цепочки**:
     - Если появится альтернативная цепочка с большей совокупной сложностью (или количеством работы), она станет основной.
     - Это может привести к замене недавно добавленных блоков.

2. **Вероятностный характер финализации**:
   - Чем больше блоков создано после текущего блока, тем меньше вероятность его замены.
   - Пример:
     - После 6 подтверждений вероятность изменения блока минимальна.

3. **Слабая гарантия неизменности**:
   - Нет строгой гарантии, что блок нельзя будет изменить, даже после большого числа подтверждений.

---

### Почему в Ethereum есть финализация?

1. **Proof of Stake**:
   - Ethereum 2.0 использует PoS, где валидаторы подтверждают блоки путём стейкинга токенов.
   - Валидаторы получают награды за честную работу и теряют стейк (slashing) за попытки изменить уже финализированные блоки.

2. **Алгоритмы консенсуса**:
   - В Ethereum используется **Casper FFG** (Friendly Finality Gadget):
     - Финализация происходит, когда блок получает достаточное количество голосов от валидаторов.
     - После финализации изменение блока становится экономически невыгодным или невозможным.

3. **Строгая неизменность**:
   - После финализации блок становится неизменяемым на 100%, что подходит для сложных смарт-контрактов и DeFi-приложений.

---

### Сравнение

| Характеристика              | Bitcoin                          | Ethereum                         |
|-----------------------------|-----------------------------------|----------------------------------|
| Механизм консенсуса         | Proof of Work                    | Proof of Stake                   |
| Финализация                 | Вероятностная                    | Абсолютная                       |
| Время финализации           | ~6 блоков (~60 минут)            | 1-2 эпохи (~12-24 минут)         |
| Риск изменения блока        | Зависит от количества подтверждений | Практически отсутствует после финализации |

---

### Зачем нужна финализация?

1. **Гарантия неизменности**:
   - Финализация необходима для защиты от атак, таких как двойная трата.

2. **Смарт-контракты**:
   - В Ethereum многие смарт-контракты зависят от строгой гарантии неизменности блоков.

3. **Оптимизация децентрализованных приложений**:
   - Финализация делает работу DApps более предсказуемой и безопасной.

---

### Связанные темы
- [[Как связаны блоки в цепочке?]]
- [[Может ли злонамеренный майнер, который создает блок потратить средства другого пользователя? Ответ детализируйте.]]
- [[Какую математическую задачку решают майнеры в POW консенсусе? Что конкретно они делают и какие критерии правильности решения задачи?]]

---

### Источники
1. [Bitcoin Developer Guide: Chain Reorganizations](https://bitcoin.org/en/developer-guide#block-chain-overview)
2. [Ethereum Documentation: Proof of Stake](https://ethereum.org/en/developers/docs/consensus-mechanisms/pos/)
3. [Casper FFG Overview](https://vitalik.ca/general/2020/12/22/casper.html)