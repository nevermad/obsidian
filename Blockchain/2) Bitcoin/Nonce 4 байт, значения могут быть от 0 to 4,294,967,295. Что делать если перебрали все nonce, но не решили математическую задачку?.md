
**Короткий ответ**: Если перебраны все значения nonce, майнеры изменяют дополнительные данные в блоке, такие как **extra nonce** в coinbase-транзакции или временную метку, чтобы создать новый набор хэшей и продолжить поиск.

---

## Подробный разбор

### Проблема исчерпания nonce
1. **Nonce**:
   - Nonce (number used once) — это 32-битное поле в заголовке блока, используемое для изменения данных блока.
   - Диапазон значений: от 0 до \( 2^{32} - 1 \), что ограничивает число попыток поиска подходящего хэша.

2. **Когда nonce исчерпан**:
   - При высоком уровне сложности (низком target) диапазона nonce может быть недостаточно для нахождения корректного хэша.
   - В таких случаях требуется изменить другие данные блока.

---

### Решение проблемы: Extra Nonce
1. **Изменение coinbase-транзакции**:
   - Майнеры добавляют **extra nonce** в coinbase-транзакцию.
   - Изменение coinbase приводит к изменению Merkle Root, что генерирует новый набор данных для хэширования.

2. **Временная метка (Timestamp)**:
   - Если extra nonce исчерпан, майнер может изменить временную метку в заголовке блока.
   - Изменение временной метки также создаёт новый набор данных для хэширования.

3. **Перестановка транзакций**:
   - В редких случаях майнер может изменить порядок транзакций в блоке, что приводит к новому Merkle Root.

---

### Пример
- Nonce: \( 0 \to 2^{32} - 1 \), подходящий хэш не найден.
- Изменение:
  1. Увеличение extra nonce в coinbase-транзакции.
  2. Изменение временной метки.
  3. Перестановка транзакций.

---

### Почему это работает?
- Хэширование в Bitcoin зависит от данных в заголовке блока, включая nonce, Merkle Root, и временную метку.
- Любое изменение данных в заголовке генерирует совершенно другой хэш (из-за свойств функции SHA-256).

---

### Связанные темы
- [[Какую математическую задачку решают майнеры в POW консенсусе? Что конкретно они делают и какие критерии правильности решения задачи?]]
- [[Как происходит создание блока?]]
- [[Структура блока, какие поля имеются и для чего нужны?]]

---

### Источники
1. [Bitcoin Developer Guide: Nonce](https://bitcoin.org/en/developer-guide#block-header)
2. [Extra Nonce Explained](https://en.bitcoin.it/wiki/Nonces)
3. [Mining Process](https://www.coindesk.com/learn/what-is-bitcoin-mining)