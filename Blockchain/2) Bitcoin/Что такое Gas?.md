
**Короткий ответ**: Gas — это единица измерения вычислительной работы, необходимой для выполнения транзакций или операций в сети Ethereum. Gas используется для оплаты работы узлов и предотвращения злоупотреблений ресурсами сети.

---

## Подробный разбор

### Основная идея Gas

1. **Роль Gas в Ethereum**:
   - Любая операция в сети Ethereum требует вычислительных ресурсов.
   - Gas измеряет количество этих ресурсов, необходимое для выполнения операции.
   - Например:
     - Простая транзакция (перевод ETH) требует 21,000 Gas.
     - Вызов сложного смарт-контракта может потребовать миллионы Gas.

2. **Gas и ETH**:
   - Плата за Gas указывается в Gwei (1 Gwei = \(10^{-9}\) ETH).
   - Общая стоимость транзакции:
     $$
     \text{Стоимость} = \text{Gas Limit} \times \text{Gas Price}
     $$

---

### Зачем нужен Gas?

1. **Оплата узлов**:
   - Узлы сети Ethereum выполняют транзакции и операции, получая плату в виде Gas.

2. **Предотвращение атак**:
   - Без механизма Gas злоумышленники могли бы перегрузить сеть бесконечными или очень тяжёлыми вычислениями.
   - Gas ограничивает ресурсы, доступные каждой транзакции.

3. **Приоритизация транзакций**:
   - Узлы предпочитают транзакции с более высокой платой за Gas, так как это увеличивает их прибыль.

---

### Как работает Gas?

1. **Gas Limit**:
   - Максимальное количество Gas, которое отправитель готов потратить на транзакцию.
   - Пример: простая транзакция — 21,000 Gas.

2. **Gas Price**:
   - Плата за единицу Gas, установленная отправителем.
   - Пример: 50 Gwei.

3. **Обработка транзакции**:
   - Узлы проверяют, достаточно ли средств для покрытия стоимости транзакции.
   - После выполнения операции списывается фактически использованный Gas, а остаток возвращается отправителю.

4. **Неудачные транзакции**:
   - Если операция не завершается (например, из-за ошибки смарт-контракта), Gas не возвращается, так как ресурсы уже были израсходованы.

---

### Пример

1. Отправка 1 ETH:
   - **Gas Limit**: 21,000.
   - **Gas Price**: 50 Gwei.
   - Итоговая стоимость:
     $$
     21,000 \times 50 \text{ Gwei} = 1,050,000 \text{ Gwei} = 0.00105 \text{ ETH}.
     $$

2. Вызов смарт-контракта:
   - **Gas Limit**: 500,000.
   - **Gas Price**: 20 Gwei.
   - Итоговая стоимость:
     $$
     500,000 \times 20 \text{ Gwei} = 10,000,000 \text{ Gwei} = 0.01 \text{ ETH}.
     $$

---

### Gas в контексте масштабируемости

1. **Максимальное потребление Gas**:
   - Ethereum ограничивает Gas на блок, чтобы предотвратить перегрузку сети (например, 30 миллионов Gas на блок в Ethereum 2.0).

2. **Решения второго уровня**:
   - Сети Layer 2 (например, Arbitrum, Optimism) используют Gas, но по более низким ставкам, чтобы снизить нагрузку на основную сеть.

---

### Связанные темы
- [[Время создания блока Bitcoin & Ethereum? Ваши мысли почему такое время?]]
- [[Какую математическую задачку решают майнеры в POW консенсусе? Что конкретно они делают и какие критерии правильности решения задачи?]]
- [[Как работает модель балансов в Ethereum?]]

---

### Источники
1. [Ethereum Documentation: Gas and Fees](https://ethereum.org/en/developers/docs/gas/)
2. [Understanding Ethereum Gas](https://medium.com/mycrypto/what-is-ethereum-gas-466197d2c014)
3. [EIP-1559 Overview](https://eips.ethereum.org/EIPS/eip-1559)