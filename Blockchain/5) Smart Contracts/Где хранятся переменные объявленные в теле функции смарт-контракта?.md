
## Короткий ответ

Переменные, объявленные в теле функции смарт-контракта, хранятся в `memory` или `stack`, в зависимости от их типа и использования. Эти данные являются временными и удаляются после завершения выполнения функции.

---

## Подробный разбор

### **Где хранятся переменные?**
1. **memory:**
   - Используется для сложных типов данных, таких как массивы, структуры и строки.
   - Данные в `memory` существуют только во время выполнения функции.
   - Пример:
     ```solidity
     function example() public pure {
         uint[] memory arr = new uint[](3); // Временный массив
         arr[0] = 1;
         arr[1] = 2;
         arr[2] = 3;
     }
     ```

2. **stack:**
   - Используется для простых типов данных, таких как `uint`, `bool`, и указатели на данные в `memory`.
   - Stack имеет ограничение в 1024 элемента.
   - Пример:
     ```solidity
     function add(uint a, uint b) public pure returns (uint) {
         uint result = a + b; // Переменная хранится в stack
         return result;
     }
     ```

### **Особенности хранения данных**

- **memory:**
  - Данные изменяемы.
  - Требует выделения памяти, что увеличивает затраты газа.
  - Подходит для временных вычислений с большими объемами данных.

- **stack:**
  - Данные хранятся в стеке EVM.
  - Быстрый доступ, но ограниченный размер.
  - Используется для небольших данных, таких как числа и булевы значения.

### **Пример комбинированного использования**
```solidity
function processData(uint[] calldata data) external pure returns (uint[] memory) {
    uint[] memory result = new uint[](data.length); // memory
    for (uint i = 0; i < data.length; i++) { // i хранится в stack
        result[i] = data[i] * 2;
    }
    return result;
}
```

---

## Связанные темы
- [Вернуться к списку вопросов](5.%20Список%20вопросов.md)
- [[Где хранятся переменные объявленные в теле смарт-контракта?]]
- [[Какие типы данных есть в Solidity?]]
- [[Что такое Stack EVM?]]

---

## Источники
- [Solidity Documentation - Data Location](https://docs.soliditylang.org/en/latest/types.html#data-location)
- [Understanding Memory and Stack in Solidity](https://ethereum.stackexchange.com/questions/10457/what-is-the-memory-keyword-in-solidity)
---