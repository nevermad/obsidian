## Короткий ответ
Ключевые слова `calldata` и `memory` в Solidity определяют, где хранятся данные при вызове функций. `calldata` используется для данных, передаваемых в функцию, и является неизменяемым. `memory` используется для временного хранения данных внутри функции. Основное отличие: `calldata` экономит газ, так как данные хранятся вне контракта, а `memory` требует выделения памяти.

---

## Подробный разбор

### **Что такое calldata?**
- **Определение:** 
  - `calldata` — это специальное хранилище, которое содержит аргументы, переданные в функцию.
  - Доступно только для чтения и не может быть изменено.
  - Используется для внешних (`external`) функций.

- **Преимущества:**
  - Экономия газа, так как данные хранятся вне контракта.
  - Идеально подходит для больших массивов или сложных структур данных.

- **Пример:**
  ```solidity
  function processArray(uint[] calldata data) external pure returns (uint) {
      return data.length;
  }
  ```

### **Что такое memory?**
- **Определение:**
  - `memory` — это временное хранилище, используемое для операций внутри функции.
  - Может быть изменено во время выполнения функции.
  - Данные удаляются после завершения функции.

- **Преимущества:**
  - Гибкость: можно создавать, изменять и удалять данные.
  - Подходит для внутренних (`internal`) и публичных (`public`) функций.

- **Пример:**
  ```solidity
  function createArray() public pure returns (uint[] memory) {
      uint[] memory arr = new uint[](3);
      arr[0] = 1;
      arr[1] = 2;
      arr[2] = 3;
      return arr;
  }
  ```

### **Отличия calldata и memory**
| Характеристика       | `calldata`                          | `memory`                          |
|----------------------|-------------------------------------|-----------------------------------|
| **Модифицируемость** | Только для чтения                  | Может быть изменена              |
| **Газовые затраты**  | Меньше                             | Больше                           |
| **Использование**    | Внешние функции                    | Внутренние и публичные функции   |
| **Хранение данных**  | Вне контракта                      | Временное хранилище в контракте  |

### **Когда использовать?**
- **calldata:**
  - Для внешних вызовов, особенно с большими данными.
  - Когда данные не нужно изменять.

- **memory:**
  - Для временных вычислений внутри функции.
  - Когда данные должны быть изменяемыми.

---

## Связанные темы
- [Вернуться к списку вопросов](5.%20Список%20вопросов.md)
- [[Как работают модификаторы изменения состояния pure, view на уровне Solidity? Какие нюансы на уровне байткода EVM?]]
- [[Где хранятся переменные объявленные в параметрах функций смарт-контракта?]]
- [[Какие типы данных есть в Solidity?]]

---
## Источники
- [Solidity Documentation - Data Location](https://docs.soliditylang.org/en/latest/types.html#data-location)
- [Understanding calldata and memory in Solidity](https://ethereum.stackexchange.com/questions/74442/when-should-i-use-calldata-and-when-should-i-use-memory)
---