
## Короткий ответ

Переменные, объявленные в параметрах функций смарт-контракта, хранятся в `calldata` или `memory`, в зависимости от типа данных и модификатора функции. `calldata` используется для внешних вызовов и является неизменяемым, тогда как `memory` используется для временного хранения внутри функции.

---

## Подробный разбор

### **Где хранятся переменные?**
1. **calldata:**
   - Используется для аргументов, передаваемых в функцию.
   - Доступно только для чтения и не может быть изменено.
   - Применяется для внешних (`external`) функций.
   - Пример:
     ```solidity
     function processArray(uint[] calldata data) external pure returns (uint) {
         return data.length; // Данные доступны только для чтения
     }
     ```

2. **memory:**
   - Используется для временного хранения данных внутри функции.
   - Может быть изменено во время выполнения функции.
   - Применяется для публичных (`public`) и внутренних (`internal`) функций.
   - Пример:
     ```solidity
     function createArray(uint[] memory data) public pure returns (uint[] memory) {
         uint[] memory result = new uint[](data.length);
         for (uint i = 0; i < data.length; i++) {
             result[i] = data[i] * 2;
         }
         return result;
     }
     ```

### **Особенности хранения данных**
- **calldata:**
  - Экономит газ, так как данные хранятся вне контракта.
  - Подходит для больших массивов или сложных структур данных.
  - Не требует выделения памяти.

- **memory:**
  - Требует выделения памяти, что увеличивает затраты газа.
  - Подходит для временных вычислений с изменяемыми данными.

### **Пример комбинированного использования**
```solidity
function processData(uint[] calldata input) external pure returns (uint[] memory) {
    uint[] memory output = new uint[](input.length); // memory
    for (uint i = 0; i < input.length; i++) { // i хранится в stack
        output[i] = input[i] + 1;
    }
    return output;
}
```

---

## Связанные темы
- [Вернуться к списку вопросов](5.%20Список%20вопросов.md)
- [[Какую функциональность добавляет ключевое слово calldata, memory? В чем отличие calldata и memory?]]
- [[Где хранятся переменные объявленные в теле функции смарт-контракта?]]
- [[Какие типы данных есть в Solidity?]]

---

## Источники
- [Solidity Documentation - Data Location](https://docs.soliditylang.org/en/latest/types.html#data-location)
- [Understanding calldata and memory in Solidity](https://ethereum.stackexchange.com/questions/74442/when-should-i-use-calldata-and-when-should-i-use-memory)
---